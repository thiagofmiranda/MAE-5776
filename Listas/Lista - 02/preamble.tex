\lstset{
  breaklines=true
}

\usepackage[labelsep=period]{caption}
\usepackage[labelfont=bf]{caption}
\captionsetup{justification=raggedright,singlelinecheck=false}